---
layout: null
permalink: /search.json
---
[
  {% assign pages_count = 0 %}
  {% for page in site.pages %}
    {% assign exclude_page = false %}
    {% if page.url contains '/search.json' or page.url contains '/assets/' %}
      {% assign exclude_page = true %}
    {% endif %}
    {% unless exclude_page %}
      {% if pages_count > 0 %},{% endif %}
      {
        "title"    : "{{ page.title | escape }}",
        "category" : "{{ page.category | escape }}",
        "tags"     : "{{ page.tags | join: ', ' }}",
        "url"      : "{{ page.url }}",
        "date"     : "{{ page.date }}",
        "content"  : {{ page.content | strip_html | strip_newlines | jsonify }}
      }
      {% assign pages_count = pages_count | plus: 1 %}
    {% endunless %}
  {% endfor %}
  {% for post in site.posts %}
    {% if pages_count > 0 or forloop.first == false %},{% endif %}
    {
      "title"    : "{{ post.title | escape }}",
      "category" : "{{ post.category | escape }}",
      "tags"     : "{{ post.tags | join: ', ' }}",
      "url"      : "{{ post.url }}",
      "date"     : "{{ post.date }}",
      "content"  : {{ post.content | strip_html | strip_newlines | jsonify }}
    }
  {% endfor %}
]
